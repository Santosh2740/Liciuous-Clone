<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chicken</title>
    <link rel="stylesheet" href="../styles/chicken.css" />
    <script
      src="https://kit.fontawesome.com/afc5c86662.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./common.css">
    <link rel="stylesheet" href="../Components/Common.css">
    <link rel="stylesheet" href="../NavbarFooter/Styles/footer.css" />
    <link rel="shortcut icon" href="https://www.licious.in/favicon_old.ico" />
  </head>
  <body>
    <div id="navbar"></div>
</div>

    <div class="refermain">
      <p id="refhome"><a href="../index.html" class="atultoday">Home&nbsp;&nbsp;&nbsp;</a></p>
      <p><i class="fa-solid fa-caret-right"></i></p>
      <p id="chickenHead">&nbsp;&nbsp;&nbsp;<span style="color: #D11243;">Chicken</span></p>
    </div>
    <div class="bar1"><hr /></div>
    <div class="head">
      <h2>Chicken </h2>
    </div>  
    <div id="potContainer">
    <div class="images">
      <p>
        <img src="	https://d2407na1z3fc0t.cloudfront.net/USP/usp_58e78b9c4b2e0" alt="">
        <div id="nameimage"><span>Farm-raised superior breed &nbsp;</span></div>
      </p>
    </div>
    <div class="images1">
      <p>
        <img src="	https://d2407na1z3fc0t.cloudfront.net/USP/usp_58e78b9c4b2e0" alt="">
        <div id="nameimage1"><span> &nbsp; &nbsp; Farm-raised superior breed &nbsp;</span></div>
      </p>
    </div>
  </div>
    
    <div class="bar"><hr /></div><br>
    <!-- ------------------ -->
    <div id="container"></div>
    <div id="footer"></div>
  </body>
</html>
<script>
  var cardArr = JSON.parse(localStorage.getItem("cardArr")) || [];
console.log(cardArr);

    let data;
  let getData = async () => {
    let res = await fetch("https://safe-eyrie-39519.herokuapp.com/licious/chicken");
    let data = await res.json();
    _chicekn(data)
  };
  getData();
  function _chicekn(chikendata){
  chikendata.map(function (elem) {
    var main = document.createElement("div");
    main.setAttribute("class", "main");
    var img = document.createElement("img");
    img.setAttribute("src", elem.imgUrl);
    img.setAttribute("class", "image");

    var name = document.createElement("h4");
    name.innerText = elem.name;
    var des = document.createElement("p");
    des.setAttribute("class", "des");
    des.innerText = elem.des;
    var wgt = document.createElement("div");
    wgt.setAttribute("class", "wgt");
    var net_tag = document.createElement("h6");
    net_tag.innerText = elem.net_tag;

    var net = document.createElement("h6");
    net.innerText = elem.net;
    var n_gm = document.createElement("h6");
    n_gm.innerText = elem.unit;

    var gross_tag = document.createElement("h6");
    gross_tag.innerText = elem.gross_tag;
    var gross = document.createElement("h6");
    gross.innerText = elem.gross;
    var g_gm = document.createElement("h6");
    g_gm.innerText = elem.unit;

    var hold = document.createElement("div");
    hold.setAttribute("class", "hold");

    var pri = document.createElement("div");
    pri.setAttribute("class", "pri");
    var price_tag = document.createElement("h5");
    price_tag.innerText = elem.price_tag;
    var cuurency = document.createElement("h5");
    cuurency.innerText = elem.cuurency;
    var price = document.createElement("h5");
    price.innerText = elem.price;
    var strikePrice = document.createElement("strike");
    strikePrice.innerText = elem.strikePrice;

    var btndiv = document.createElement("div");
    btndiv.setAttribute("class", "btndiv");
    var addCart = document.createElement("button");
    addCart.setAttribute("class", "addcartbtn");
    addCart.innerHTML = "Add to Cart";
    addCart.addEventListener("click", function () {
      // alert("clicked")
      // window.location.href ="../ProductDetails/Product_pages.html";
      // localStorage.setItem("cardArr1", JSON.stringify(elem));
      // display(cardArr);
      addToCart(elem);
      
    });
    wgt.append(net_tag, net, n_gm, gross_tag, gross, g_gm);
    pri.append(price_tag, cuurency, price, strikePrice, addCart);
    // btndiv.append(addCart)

    main.append(img, name, des, wgt, pri);
    document.querySelector("#container").append(main);
  });
}
function addToCart(e){
        e.quant=1
        cardArr.push(e)
       localStorage.setItem("cardArr", JSON.stringify(cardArr));
        // display(cardArr);
        // subto();
        // addE()
       console.log(cardArr)
    
      };
console.log(data);

function display(e) {
  document.querySelector("#addproduct").innerHTML = "";
  cardArr.map(function (e, index) {
    var div1 = document.createElement("div");
    var no = document.createElement("h3");
    no.innerText = index + 1;

    no.setAttribute("id", "no");

    var pa = document.createElement("h3");
    pa.innerText = e.name;
    pa.setAttribute("id", "name");

    var div2 = document.createElement("div");
    div2.setAttribute("class", "pricep");

    var div3 = document.createElement("div");
    var gram = document.createElement("button");
    gram.innerText = e.gross + e.unit;
    gram.setAttribute("id", "gram");

    var price = document.createElement("p");
    price.innerText = e.cuurency + e.price;
    price.setAttribute("id", "price");

    var div4 = document.createElement("div");
    div4.setAttribute("id", "div4");
    div4.append(no, pa);
    var btu1 = document.createElement("button");
    btu1.setAttribute("id", "btu1");
    btu1.addEventListener("click", function () {
      dicre(index);
    });

    btu1.innerText = "-";
    var quant = document.createElement("p");
    quant.innerText = e.quant;
    quant.setAttribute("id", "qunty");
    var btu2 = document.createElement("button");
    btu2.addEventListener("click", function () {
      increse(index);
    });
    btu2.innerText = "+";
    btu2.setAttribute("id", "btu2");

    //    div3.append(gram,price);
    //    div4.append(btu1,qunty,btu2);
    var element = document.createElement("hr");
    document.body.appendChild(element);
    div2.append(gram, price, btu1, quant, btu2);
    div1.append(div4, div2, element);
    document.querySelector("#addproduct").append(div1);
    console.log(e);
  });
}

function increse(index) {
  if (cardArr[index].quant != 0) {
    cardArr[index].quant++;

    localStorage.setItem("cardArr", JSON.stringify(cardArr));
    document.getElementById("stotal").innerText = total;
    addE();
    addto();
  } else if (cardArr[index].quant == 0) {
    cardArr[index].quant++;
    localStorage.setItem("cardArr", JSON.stringify(cardArr));
    document.getElementById("stotal").innerText = total;
    addE();
    addto();
  }
  display(cardArr);
}
function addto() {
  var total = cardArr.reduce(function (acc, e, index) {
    return acc + e.price * e.quant;
    display(cardArr);
  }, 0);
  document.getElementById("stotal").innerText = total;
  addE();
  display(cardArr);
}
function dicre(index) {
  if (cardArr[index].quant != 0) {
    cardArr[index].quant--;
    localStorage.setItem("cardArr", JSON.stringify(cardArr));
    document.getElementById("stotal").innerText = total;
    addE();
    subto();
  } else if (cardArr[index].quant == 0) {
    cardArr[index].quant++;
    localStorage.setItem("cardArr", JSON.stringify(cardArr));

    document.getElementById("stotal").innerText = total;
    addE();
    subto();
  }
}
display(cardArr);

function subto() {
  var total = cardArr.reduce(function (acc, e, index) {
    return acc + e.price * e.quant;
    display(cardArr);
  }, 0);
  document.getElementById("stotal").innerText = total;
  addE();
  display(cardArr);
}
var c = 0;
function addE() {
  if (c == 0) {
    document.getElementById("total").innerText =
      +document.getElementById("stotal").innerHTML + 39;
  } else if (+total > 10) {
    document.getElementById("total").innerText =
      +document.getElementById("stotal").innerHTML;
    c++;
  } else if (+total < 10) {
    c = 0;

    document.getElementById("total").innerText =
      +document.getElementById("stotal").innerHTML;
  }
}
subto();
addto();
display(cardArr);




</script>
<script src="./component/newComp.js" type="module">
</script>
<script src="../Components/login.js" type="module"></script>
<script src="../silly-authority-4051-fw19_0794_day-5/searchdata.html"></script>

<script src="./component/new2.js" type="module"></script>
